<!DOCTYPE html>
<html>
    <head>
        <% include ../partials/head.html %>
    </head>
    <body class = 'container'>
        <% include ../partials/nav.html %>
        <% include ../partials/echo.ejs %>
        <hr>
    </body>
    
    <div id = 'HTTP-3-1' class = 'col-md-6 caseModule' zendao-case = '2667'>
        <h4>HTTP-3-1<span class = 'caseID'></span>CSP发送违例报告的请求会被Sphinx保护</h4>
        <p>Describe: 访问标准保护后的测试场景; 访问高级保护后的测试场景</p>
        <p>Expect: 点击按钮后，将发送违例报告，该请求被cookie token/url token保护</p>
        <form method = 'get'>
            <div class="form-group">
                <label for = 'Content-Security-Policy'>Content-Security-Policy</label>
                <input type = 'text' name = 'Content-Security-Policy' value = "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; report-uri /HTTP/functionality?case=csp-reports" class="form-control" />
            </div>
            <div>
                <input type = 'hidden' name = 'case' value = 'HTTP-3-1' class = 'form-control'/>
            </div>
            <!--a class = 'btn btn-info' onclick = 'HTTP_3_1();'>Switch to #2668</a-->
            <input type = 'submit' value = 'Apply Response Header' class = 'btn btn-warning'/>
        </form>
    </div>
    <div id = 'HTTP-3-2' class = 'col-md-6 caseModule' zendao-case = '2668'>
        <h4>HTTP-3-2<span class = 'caseID'></span>CSP配置了report-uri，但无违例的情况</h4>
        <p>Describe: 访问标准保护后的测试场景; 访问高级保护后的测试场景</p>
        <p>Expect: 点击按钮后，没有违例；Sphinx注入后应该没有违例报告</p>
        <form method = 'get'>
            <div class="form-group">
                <label for = 'Content-Security-Policy'>Content-Security-Policy</label>
                <input type = 'text' name = 'Content-Security-Policy'  value = "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; report-uri /HTTP/functionality?case=csp-reports" class="form-control" />
            </div>
            <div>
                <input type = 'hidden' name = 'case' value = 'HTTP-3-2' class = 'form-control'/>
            </div>
            <input type = 'submit' value = 'Apply Response Header' class = 'btn btn-success'/>
        </form>
    </div>

    <div id = 'HTTP-3-3' class = 'col-md-6 caseModule' zendao-case = '2553'>
        <h4>HTTP-3-3 <span class = 'caseID'></span>普通：GET = 301 + Location</h4>
        <p>Describe: 该状态码表示请求的资源已被分配了新的URI</p>
        <p>Expect: 点击按钮后，将使用下表的方法请求，并且返回对应的状态码；重定向到本页</p>
        <form name = 'HTTP-3-3' method = 'get' class = 'form-inline'>
            <div class="form-group">
                <label for = 'Method'>HTTP Verb</label>
                <input type = 'text' name = 'Method' placeholder = "GET" value = 'GET' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <label for = 'StatusCode'>Status Code</label>
                <input type = 'text' name = 'StatusCode' placeholder = "301" value = '301' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-3'/>
            </div>
            <input type = 'submit' value = '301 Moved Permanently ' class = 'btn btn-default'/>
        </form>
    </div>

    <div id = 'HTTP-3-4' class = 'col-md-6 caseModule' zendao-case = '2554'>
        <h4>HTTP-3-4 <span class = 'caseID'></span>普通：POST = 302 + Location</h4>
        <p>Describe: 临时性重定向，希望用户本次能使用新的URI访问。</p>
        <p>Note: 301、302标准禁止将POST方法改变成GET方法，但几乎所有的浏览器都会这么做，并删除请求报文主体，再次发送</p>
        <p>Expect: 点击按钮后，将使用下表的方法请求，并且返回对应的状态码；重定向到本页</p>
        <form name = 'HTTP-3-3' method = 'post' class = 'form-inline'>
            <div class="form-group">
                <label for = 'Method'>HTTP Verb</label>
                <input type = 'text' name = 'Method' placeholder = "POST" value = 'POST' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <label for = 'StatusCode'>Status Code</label>
                <input type = 'text'  name = 'StatusCode' placeholder = "302" value = '302' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-4'/>
            </div>
            <input type = 'submit' value = '302 Found' class = 'btn btn-default'/>
        </form>
    </div>

    <div id = 'HTTP-3-5' class = 'col-md-6 caseModule' zendao-case = '2562,2563'>
        <h4>HTTP-3-5 <span class = 'caseID'></span>PUT = 303/307</h4>
        <p>Describe: 303 See Other 状态码表示由于请求对应的资源存在着另一个URI，应使用GET方法定向获取请求的资源</p>
        <p>Describe: 307 Temporary Redirect, 与302 Found有相同的含义，但是会遵守浏览器标准，不改变重定向的请求方法</p>
        <p>Expect: 点击按钮后，将使用下表的方法请求，并且返回对应的状态码；重定向到/HTTP/methods</p>
        <form name = 'HTTP-3-5' class = 'form-inline'>
            <div class = 'form-group'>
                <label class = 'col-form-label'>HTTP Method</label>
                <select name = 'httpMethod' class = 'form-control'>
                    <option value = 'PUT'>PUT</option>
                </select>
            </div>
            <div class="form-group">
                <label for = 'StatusCode'>Status Code</label>
                <input type = 'text'  name = 'StatusCode' placeholder = "307" value = '303' class="form-control"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-5'/>
            </div>
            <button class = 'ajax btn btn-default'>AJAX + PUT</button>
        </form><br>
    </div>

    <div id = 'HTTP-3-6' class = 'col-md-6 caseModule' zendao-case = '2557,2564'>
        <h4>HTTP-3-6 <span class = 'caseID'></span>POST = 308</h4>
        <p>Describe: 308 Permanent Redirect, The request method and the body will not be altered, whereas 301 may incorrectly sometimes be changed to a GET method.</p>
        <p>Expect: 浏览器重定向到 /HTTP/methods/HTTP-3-6</p>
        <form name = 'HTTP-3-5' method = 'POST' action = '/HTTP/functionality/HTTP-3-6' class = 'form-inline'>
            <div class = 'form-group'>
                <label class = 'col-form-label'>HTTP Method</label>
                <select name = 'httpMethod' class = 'form-control'>
                    <option value = 'GET'>GET</option>
                    <option value = 'POST' selected>POST</option>
                    <option value = 'PUT'>PUT</option>
                    <option value = 'DELETE'>DELETE</option>
                    <option value = 'HEAD'>HEAD</option>
                </select>
            </div>
            <div class="form-group">
                <label for = 'StatusCode'>Status Code</label>
                <input type = 'text'  name = 'StatusCode' placeholder = "308" value = '308' class="form-control" readonly="readonly"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-6'/>
            </div>
            <input type = 'submit' value = 'POST Non-Ajax' class = 'btn btn-default'/>
            <button class = 'ajax btn btn-default'>AJAX + POST </button>
        </form><br>
    </div>

    <div id = 'HTTP-3-7' class = 'col-md-6 caseModule' zendao-case = '2558,2565'>
        <h4>HTTP-3-7 <span class = 'caseID'></span>反复跳转 (POST = 308) * 10</h4>
        <p>Describe: 首次请求会发到/HTTP/functionality/HTTP-3-7/<code>0</code></p>
        <p>Expect: 不断重定向到/HTTP/functionality/HTTP-3-7/<code>9</code>，返回200</p>
        <form name = 'HTTP-3-5' method = 'POST' action = '/HTTP/functionality/HTTP-3-7/0' class = 'form-inline'>
            <div class = 'form-group'>
                <label class = 'col-form-label'>HTTP Method</label>
                <select name = 'httpMethod' class = 'form-control'>
                    <option value = 'GET'>GET</option>
                    <option value = 'POST' selected>POST</option>
                    <option value = 'PUT'>PUT</option>
                    <option value = 'DELETE'>DELETE</option>
                    <option value = 'HEAD'>HEAD</option>
                </select>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-7'/>
            </div>
            <input type = 'submit' value = 'POST + Non-Ajax' class = 'btn btn-default'/>
            <button class = 'ajax btn btn-default'> Method + Ajax </button>
        </form><br>
    </div>

    <div id = 'HTTP-3-8' class = 'col-md-6 caseModule' zendao-case = '2559,2566'>
        <h4>HTTP-3-8 <span class = 'caseID'></span>跨域重定向</h4>
        <p>Describe: 向/HTTP-3-8发请求，得到308重定向响应，Location为下表地址，浏览器重新发请求 </p>
        <p>ToDo: Ajax的实现遇到问题，浏览器会发三个请求，第三个为OPTIONS</p>
        <form name = 'HTTP-3-8' method = 'POST' action = '/HTTP/functionality/HTTP-3-8'>
            <div class = 'form-group'>
                <label class = 'col-form-label'>HTTP Method</label>
                <select name = 'httpMethod' class = 'form-control'>
                    <option value = 'GET'>GET</option>
                    <option value = 'POST' selected>POST</option>
                    <option value = 'PUT'>PUT</option>
                    <option value = 'DELETE'>DELETE</option>
                    <option value = 'HEAD'>HEAD</option>
                </select>
            </div>
            <div class="form-group">
                <label for = 'remoteAddress'>请输入远程服务器的域名与路径</label>
                <input type = 'text'  name = 'remoteAddress' placeholder = "http://10.10.68.90:3000/JS/Ajax/JS-2-1" value = 'http://10.10.68.90:3000/JS/Ajax/JS-2-1' class="form-control"/>
            </div>
            <div class="form-group">
                <input type = 'hidden' name = 'case' value = 'HTTP-3-8'/>
            </div>
            <input type = 'submit' value = 'POST + Non-Ajax' class = 'btn btn-default'/>
            <!--
                <button class = 'ajax btn btn-default'> Method + Ajax </button>
            -->
            
        </form>
    </div>
    
    <script type = "text/javascript" src = "/HTTP/tSuite-3-functionality.js"></script>
    </body>
</html>